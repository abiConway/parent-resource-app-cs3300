function UcJEl(a,b){a.Xpd.set(b.id,b)}function UcKEl(a,b){a.nog.unshift(b)}function UcLEl(a,b){const c=Ucj8j(a,b);if(c instanceof Ucy6j){const d=c.eSa.toJSON();a.Vsl.Ma(d);a.yt.Ma(b)}return c}var UcMEl=Ucdh({R4d:"plain text"});var UcNEl=Ucdh({X9i:"shape library",Tom:"content gallery data panel",yem:"build"});var UcOEl,UcPEl=UcOEl=class{constructor(a){this.name="generatedUML";this.documentId=a.documentId;this.format=a.format;this.method=a.method;this.ADa=a.ADa;this.userId=a.userId}toJSON(){return UcOEl.ub(this)}};UcPEl=UcOEl=__decorate([Ucgh({documentId:["documentId",Ucg],format:["format",UcMEl],method:["method",UcNEl],ADa:["nRows",Ucbh],userId:["userId",Ucbh],name:["name",Uc9g("generatedUML")]}),__metadata("design:paramtypes",[Object])],UcPEl);var UcQEl=class extends UceD{constructor(a,b,c,d,e){super(a,b,c);this.De=e;this.type="advanced_shape_options";this.ba={columns:i18n.get("advanced-options-swimlane-columns"),rows:i18n.get("advanced-options-swimlane-rows")};if(a=d.getProperty(this.Wb(),"RowCount"))this.BWb=this.De.create(a),UccD(this,this.BWb);if(d=d.getProperty(this.Wb(),"ColumnCount"))this.nJb=this.De.create(d),UccD(this,this.nJb)}Wb(){return Ucf8j.className}ngAfterViewInit(){UcdD(this)}get cols(){return this.nJb?this.nJb.Ua():1}set cols(a){this.nJb&&
this.nJb.setValue(a)}get rows(){return this.BWb?this.BWb.Ua():1}set rows(a){this.BWb&&this.BWb.setValue(a)}};UcQEl.Ba=()=>[{type:Ucaq},{type:Uc1},{type:Uc2},{type:UcUU},{type:UcEZ}];UcQEl.oa=function(a){return new (a||UcQEl)(UcK(Ucaq),UcK(Uc1),UcK(Uc2),UcK(UcUU),UcK(UcEZ))};
UcQEl.Ia=UcF({type:UcQEl,Ea:[["lucid-multi-dimensional-swimlane-advanced-options"]],features:[UcM],Ja:4,Ha:14,La:[[3,"label"],[3,"visualStep","scalar","min","max","precision","value","valueChange"]],template:function(a,b){a&1&&(UcP(0,"lucid-rich-menu-item",0)(1,"lucid-spinner",1),UcS("valueChange",function(c){return b.cols=c}),UcQ()(),UcP(2,"lucid-rich-menu-item",0)(3,"lucid-spinner",1),UcS("valueChange",function(c){return b.rows=c}),UcQ()());a&2&&(UcO("label",b.ba.columns),UcL(1),UcO("visualStep",
1)("scalar",1)("min",1)("max",50)("precision",1)("value",b.cols),UcL(1),UcO("label",b.ba.rows),UcL(1),UcO("visualStep",1)("scalar",1)("min",1)("max",50)("precision",1)("value",b.rows))},Ka:[UcHJ,UcuE],styles:["[_nghost-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}lucid-spinner[_ngcontent-%COMP%]{max-width:72px}lucid-toggle-icon[_ngcontent-%COMP%] + lucid-toggle-icon[_ngcontent-%COMP%]{margin-left:8px}lucid-click-edit-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;border-radius:3px;border:1px solid #979ea8;font-size:14px;max-width:40em;line-height:1.5em;min-height:1.5em;padding:0 4px}lucid-click-edit-text[_ngcontent-%COMP%]   .edit-text-container[_ngcontent-%COMP%]{padding:4px}lucid-rich-menu-item.wide-content[_ngcontent-%COMP%]   lucid-single-select-dropdown[_ngcontent-%COMP%]{width:100%}"],
changeDetection:0});var UcREl=class{};UcREl.oa=function(a){return new (a||UcREl)};UcREl.$a=UcG({type:UcREl});UcREl.Za=UcD({imports:[Uc4,UcsA,UcVV,UcYD,UcWK,UcC_,UcRX,Uc1G]});function UcSEl(a){const b=a.On.Zha("UMLSequenceGenerator",{x:0,y:0},{},void 0,void 0,{});a=a.document.Dk.get(b);if(a instanceof Uck8j)return a}function UcTEl(a,b){b.Cm();const c=b.Kx();if(c){const d=Uc8Ef(a.pn,b.getPage(),b.qg.className);a.mb.Mb(new Uciu("SetProperty",{id:b.groupId,Property:Uc$w.key,Value:d}));a.selection.jk([c.id])}else a.selection.jk(b.lB().map(d=>d.id));return c}
var UcUEl=class extends UcpZ{constructor(a,b,c,d){super(...a);this.selection=b;this.On=c;this.pn=d}gja(){}AOb(){return{w:900,h:320}}};UcUEl=__decorate([Ucr(),__param(0,Ucpn(UcpZ)),__metadata("design:paramtypes",[void 0,Uc_N,Ucz0,UcEM])],UcUEl);function UcVEl(a,b,c,d){a.user&&a.analytics.H5a.uqa("uml-markup-used",a.user.id,Ucsh,"uml-markup-used");let e;e=c?c.UML_Sequence:b?b.internal.getProperties().get("Markup").UML_Sequence:a.Pal;var f=null==b?void 0:b.getGenerator();let g=void 0;g=f instanceof Uck8j?f:UcSEl(a.MWd);let h;f=null==(h=g)?void 0:UcLEl(h,Object.assign({},c||{},{UML_Sequence:e}));if(!f||!g)return null;if(f instanceof Ucy6j){c=UcTEl(a.MWd,g);b&&b!==c&&(g.properties.location.Ma({x:b.Kq.value.x,y:b.Kq.value.y}),a.DO.mJ({items:[b],
HMa:!0}));c&&Array.from(c.JIa.value).forEach(l=>{l instanceof UcdM?a.c7.fA({item:l,Qr:"uml markup"}):l instanceof UcA&&a.c7.fA({item:l,Qr:"uml markup",Yk:"uml"})});let k;a.Ph.fireEvent(new UcPEl({documentId:null!=(k=a.document.id)?k:"",format:"plain text",method:null!=d?d:"build",ADa:e.split("\n").length,userId:a.user.getId()}));return null}return{message:f.HW(),lineNum:f.gOf()}}
function UcWEl(a,b,c,d){c=c?Object.assign({},c,{UML_Sequence:c.UML_Sequence.replace(/“|”/g,'"')}):void 0;if(a.user.um.zk().uh("UMLMarkup")){const e=b&&1==b.length?b[0]:void 0;if(e&&e instanceof UcfM&&e.internal.getProperties().get("Markup")&&b)return UcVEl(a,e,c,d);if(!b||1!=b.length)return UcVEl(a,null,c,d)}else a.user&&a.analytics.H5a.uqa("uml-markup-editor-paywall",a.user.id,Ucsh,"uml-markup-editor-paywall"),UctFf(a.Fc);return null}
var UcXEl=class{constructor(a,b,c,d,e,f,g,h,k){this.document=a;this.selection=b;this.user=c;this.analytics=d;this.Ph=e;this.Fc=f;this.c7=g;this.MWd=h;this.DO=k;this.Pal="Alice -> Bob\nAlice <-- Bob\nAlice -> Bob: text\nnote right of Alice: note"}Egk(){const a=Uc1Of(this.selection.items);return a&&a.internal.getProperties().get("Markup")?[a]:[]}};UcXEl=__decorate([Ucr(),__metadata("design:paramtypes",[UcRM,Uc_N,Uc6,UcLv,UcKB,UcFM,UcOO,UcUEl,UcQN])],UcXEl);var UcYEl=class{constructor(a,b,c,d,e,f,g,h,k,l,m,n,p,q,r,t,u,v,w,x){this.Oo=a;this.Hia=b;this.viewport=c;this.selection=d;this.mb=e;this.wm=g;this.Fc=h;this.WDb=k;this.VNd=l;this.Sg=m;this.c7=n;this.Z2c=p;this.ai=q;this.yva=r;this.mEf=t;this.Ai=u;this.SGg=v;this.zZ=w;this.MWd=x}};UcYEl=__decorate([Ucr(),__param(0,Uckn(Ucto)),__metadata("design:paramtypes",[Object,Uctlg,UcMQ,Uc_N,UcOv,Uc8Yf,UcLO,UcFM,Uc7Yf,UcJFf,Ucco,UcOO,UcXEl,UckO,Ucdo,UcrJi,UcuM,Ucyri,Uc7Oc,UcUEl])],UcYEl);
function UcZEl(a){UcVN(a.selection,a.Aa,UcWN,a.tWl.bind(a));const b=UccVg(a.Hia);b.add({oc:"ios_inputs"});let c=!1;const d=f=>{c&&b.spacer();c=!0;b.openGrid({prefix:2,j9a:2,width:8});b.addButton({onClick:()=>{a.JNd&&f.xf(a.JNd)},label:f.name});b.close()},e={Hyo:{name:i18n.get("plugin-uml-option-multiplicity"),xf:f=>{const g=f.Fb.value;void 0==g.get("m1")&&f.vb(0,{t:"0..*",m:[]},1,"m1");void 0==g.get("m2")&&f.vb(1,{t:"0..*",m:[]},-1,"m2")}},UCo:{name:i18n.get("plugin-uml-option-line-reverse"),xf:f=>
{var g=f.properties.og.value;const h=f.properties.Zf.value,k=(m,n)=>{n=m instanceof Ucek?Ucek.create({block:m.block,Ff:m.Ff,JE:m.JE,RA:m.RA,jo:m.jo,nn:m.nn,style:n.style,padding:n.padding}):m instanceof Ucgk?new Ucgk(m.line,m.CF,m.AVa,n.style,n.padding):new Ucdk(m.x,m.y,n.style);n.x=m.x;n.y=m.y;return n};var l=k(g,h);g=k(h,g);f.properties.og.Ma(l);f.properties.Zf.Ma(g);l=UcGg(f.properties.Fb.value);l.forEach(m=>{null!=m.location&&(m.location=1-m.location)});0<l.size&&f.properties.Fb.Ma(l)}}};UcCc(e,
f=>{d(f)});UcdVg(a.Hia,[{content:b,label:""}],{isContextPanel:!0,checkShow:()=>!!a.JNd})}function Uc_El(a,b){return Uca(function*(){const c=UcSEl(a.wda.MWd);if(void 0===c)return{error:"FailedToCreateLucidGenerator"};if(UcLEl(c,{UML_Sequence:b})instanceof Ucy6j)return UcTEl(a.wda.MWd,c),{value:c};c.s4();return{error:"FailedToParseMarkup"}})}
var Uc0El=class extends Ucf{constructor(a,b,c,d,e,f,g,h){super();this.Ai=d;this.Ya=e;this.document=f;this.user=g;this.wda=h;this.Sg=this.wda.Sg;this.VNd=this.wda.VNd;this.Hia=this.wda.Hia;this.Z2c=this.wda.Z2c;this.selection=this.wda.selection;this.Aa=new UcIl(this);this.JNd=null;UcKEl(h.viewport.navigator,this.Qsl.bind(this));this.wda.yva.register("UMLSequenceGenerator",[this.wda.mEf]);Ucf8j.Yc(a);Ucp5.Yc(a);Ucg8j.Yc(a);a.register({className:"UMLSequence",propertyName:"Markup",value:(k,l)=>new Uc1o(k,
()=>{let m,n;if(1==l.length){let q;var p=null!=(q=l[0].internal.getProperties().get("Markup"))?q:null}else p=null;return null!=(n=null==(m=p)?void 0:m.UML_Sequence)?n:null},(m,n)=>m===n,()=>{}),enabled:k=>new Ucs(k,()=>!0,(l,m)=>l===m),POd:(k,l)=>{{const n={UML_Sequence:l};try{const p=JSON.parse(l);var m=Ucq7j(p)?p:n}catch(p){m=n}}return UcWEl(this.Z2c,k,m)},Sub:this.Z2c.Egk});Ucbo(this.Sg,{vg:[UcQEl,UcZ2],module:UcREl});h.ai.lg([{type:"advanced_shape_options",registration:{component:UcZ2}}],{selection:{fi:new Set([Ucg8j.className,
Ucp5.className,Ucp5.I7a])}});h.ai.lg([{type:"advanced_shape_options",registration:{component:UcQEl}}],{selection:{fi:new Set([Ucf8j.className])}});h.Oo.promise.then(()=>{b.H5a.uqa("uml-shape-library-enabled",g.id,Ucsh,"uml-shape-library-enabled");UcZEl(this)});this.VNd.setCallback(()=>{UcWEl(this.Z2c,void 0,void 0,"content gallery data panel")});this.Aa.listen(c,UcS6j,()=>{this.Ai.sg("uml")||(this.Ya.fireEvent(new UcVh({userId:parseInt(this.user.id),method:"shape library",Cj:"uml sequence markup",
documentId:this.document.id})),UcWEl(this.Z2c,void 0,void 0,"shape library"))});UcJEl(h.zZ,{id:"UmlViewLibrary",generate:k=>Uc_El(this,k)});UcwVg(h.viewport,h.SGg)}Qsl(a){const b=this.wda.wm.PO();if(b)for(const c of b.items.values())if(c.id==a&&c instanceof UcfM&&c.internal.getProperties().get("Markup"))return!1;return!0}tWl(){const a=c=>{function d(e){if(!(e instanceof Ucek&&e.block))return!1;e=e.block.qg.className;return!!e&&0==e.search("UML")}return d(c.properties.og.value)||d(c.properties.Zf.value)};
this.JNd=null;const b=UcFN(this.selection.items);b&&a(b)&&(this.JNd=b)}};Uc0El=__decorate([Ucr(),__metadata("design:paramtypes",[UcUU,UcLv,UcR6j,UcuM,UcKB,UcRM,Uc6,UcYEl])],Uc0El);UcaU("umlview","uml",Uc0El);
//# sourceURL=/js/application/universalcanvas_app/chunk/umlview.js?compiled=1
